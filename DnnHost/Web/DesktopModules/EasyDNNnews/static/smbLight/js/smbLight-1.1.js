!function(e,t){var a={openAt:0,wrapperResizeDuration:200,flowplayerSwf:"",socialButtons:{facebook:!1,gplus:!1,twitter:!1,inshare:!1,pinterest:!1},cssClass:"",events:{onBeforeClose:function(){}}},i="activeElement",o="imageNotLoaded",r="smbLightFixed",n="audioItem",s="videoItem",l="imageItem",c=function(t,a){var i=this;"image"!=t.type||i.images[t.src]||(i.images[t.src]={preloadFinished:!1,isLoaded:!1,width:0,height:0,$img:e('<img class="smbLightImage_'+t.id+'" alt="" />').attr("src",t.src).imagesLoaded().progress(function(e,o){var r,n;i.viewClosed||(n=i.images[t.src],n.preloadFinished=!0,n.isLoaded=o.isLoaded,o.isLoaded&&i.$imagesWrapper.append(n.$img),n.width=n.$img.width(),n.height=n.$img.height(),r=i.items[i.currentItemIndex],"image"==r.type&&r.src==t.src&&(i.initialItemLoaded=!0,g.call(i)),"function"==typeof a&&a())})})},p=function(){for(var e=this,t=0,a=e.items.length;a>t;t++)c.call(e,e.items[t])},d=function(e,t,a,i){var o,r,n=this,s=n.overlayWidth-n.main.horizontalSpace,l=n.overlayHeight-n.main.verticalSpace,c=e,p=t;return(a||e>s||t>l)&&(o=s/l,r=e/t,c=s,p=l,o>r?c=Math.round(l/t*e):r>o&&(p=Math.round(s/e*t))),i&&(p=t),{width:c,height:p,top:Math.floor((l-p)/2),left:Math.floor((s-c)/2)}},u=function(e,t){var a=this,i=function(){a.$loadingOverlay.stop(!0).fadeTo(200,0,function(){a.$loadingOverlay.css("display","none")}),"function"==typeof t&&t()},o=function(e,t){0==a.options.wrapperResizeDuration?(a.$mainWrapper.css(e),t()):a.$mainWrapper.stop(!0).animate(e,{duration:a.options.wrapperResizeDuration,complete:function(){a.$mainWrapper.css("overflow",""),t()}})},r=function(){a.$mainWrapper.height()!=e.height?o({height:e.height,top:e.top},i):i()};a.$loadingOverlay.removeClass("inProgress"),a.$mainWrapper.width()!=e.width?o({width:e.width,left:e.left},r):r()},m=function(t,a){var r,n,s=this,c=s.images[t.src];c.preloadFinished&&(s.$mainWrapper.addClass(l),e("> img",s.$imagesWrapper).removeClass(i).filter(".smbLightImage_"+t.id).addClass(i),c.isLoaded?(r=c.width,n=c.height):(r=400,n=400,s.$imagesWrapper.addClass(o)),s.$imagesWrapper.addClass(i),u.call(s,d.call(s,r,n),a))},h=function(t,a){var o=this,r="";switch(o.$mainWrapper.addClass(s),t.source){case"youtube":r='<iframe src="//www.youtube.com/embed/'+t.videoId+'" frameborder="0" allowfullscreen></iframe>';break;case"vimeo":r='<iframe src="//player.vimeo.com/video/'+t.videoId+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>';break;case"wistia":r='<iframe name="wistia_embed" src="//fast.wistia.net/embed/iframe/'+t.videoId+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';break;case"flowplayer":r='<div class="flowplayerContainer"><video src="'+t.src+'" /></div>'}o.$audioVideo.html(r).addClass(i),"flowplayer"==t.source&&e("> .flowplayerContainer",o.$audioVideo).flowplayer({swf:o.options.flowplayerSwf,ratio:t.height/t.width,tooltip:!1,embed:!1}),u.call(o,d.call(o,t.width,t.height,!0),a),o.initialItemLoaded=!0},v=function(t,a){var o=this;o.$mainWrapper.addClass(n),o.$audioVideo.html('<audio src="'+t.src+'" />').addClass(i),audiojs.create(e("> audio",o.$audioVideo)[0]),u.call(o,d.call(o,460,36,!1,!0),a),o.initialItemLoaded=!0},g=function(){var t,a=this,r=a.items,c=function(){var i,o="",r="",n="",s=!1;a.$socialButtonsTrigger.removeClass("show"),a.$socialButtonsWrapper.removeClass("show"),"string"==typeof t.title&&""!=t.title&&a.$itemTitle.text(t.title).stop(!0).fadeTo(200,1),(a.options.socialButtons.facebook||a.options.socialButtons.twitter||a.options.socialButtons.gplus||a.options.socialButtons.inshare||a.options.socialButtons.pinterest&&"image"==t.type)&&(s=!0),s&&"string"==typeof t.socialUrl&&""!=t.socialUrl?(a.$socialButtonsTrigger.css("display",""),i=encodeURIComponent(t.socialUrl),"string"==typeof t.title==t.title!=""&&(n=t.title.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r=encodeURIComponent(t.title)),a.options.socialButtons.facebook&&(o='<div><iframe src="//www.facebook.com/plugins/like.php?href='+i+'&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:21px; width: 110px;" allowTransparency="true"></iframe></div>'),a.options.socialButtons.twitter&&(o+='<div><a href="//twitter.com/share" class="twitter-share-button" data-url="'+i+'" data-text="'+n+'">Tweet</a><script type="text/javascript">twttr.widgets.load();</script></div>'),a.options.socialButtons.gplus&&(o+='<div><div class="g-plusone" data-size="medium" data-href="'+t.socialUrl+'"></div><script type="text/javascript">gapi.plusone.go();</script></div>'),a.options.socialButtons.inshare&&(o+='<div><script type="IN/Share" data-url="'+t.socialUrl+'" data-counter="right"></script><script type="text/javascript">IN.parse();</script></div>'),a.options.socialButtons.pinterest&&"image"==t.type&&(o+='<div><a href="//www.pinterest.com/pin/create/button/?url='+i+"&media="+encodeURIComponent(t.src)+"&description="+r+'" data-pin-do="buttonPin" data-pin-config="beside"><img src="//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_gray_20.png" /></a></div>'),a.$socialButtonsWrapper.html(o),""!=o&&a.options.socialButtons.pinterest&&"image"==t.type&&e.ajax({url:"//assets.pinterest.com/js/pinit.js",dataType:"script",cache:!0})):a.$socialButtonsTrigger.css("display","none")};switch(a.$audioVideo.html(""),a.$imagesWrapper.removeClass(o),a.$loadingOverlay.addClass("inProgress").stop(!0).fadeTo(0,1,function(){a.$loadingOverlay.css("display","")}),a.$itemTitle.text("").stop(!0).fadeTo(0,0),a.$socialButtonsWrapper.html(""),a.$audioVideo.html(""),a.currentItemIndex<0?a.currentItemIndex=r.length-1:a.currentItemIndex>=r.length&&(a.currentItemIndex=0),t=r[a.currentItemIndex],e("> .itemContentWrapper > div",a.$mainWrapper).removeClass(i),a.$mainWrapper.removeClass(n).removeClass(s).removeClass(l),t.type){case"image":m.call(a,t,c);break;case"video":h.call(a,t,c);break;case"audio":v.call(a,t,c);break;default:a.initialItemLoaded=!0}a.initialItemLoaded&&a.$overlayWrapper.removeClass("initializing")},f=function(){var e=this;e.overlayWidth=e.$overlayWrapperDiv.width(),e.overlayHeight=e.$overlayWrapperDiv.height(),e.center()},w=function(){var e=this;e.initialItemLoaded&&(e.currentItemIndex-=1,g.call(e))},$=function(){var e=this;e.initialItemLoaded&&(e.currentItemIndex+=1,g.call(e))},b=function(){var e=this;("function"!=typeof e.options.events.onBeforeClose||e.options.events.onBeforeClose({activeItem:e.currentItemIndex,displayItems:e.items})!==!1)&&(e.$document.off(".smbLightEvent"),e.$window.off(".smbLightEvent"),e.viewClosed=!0,e.$overlayWrapper.stop(!0).fadeOut(200,function(){e.$overlayWrapper.remove(),e.$body.removeClass(r)}))},y=function(){return document.fullscreenElement&&null!=document.fullscreenElement?!0:document.mozFullScreenElement&&null!=document.mozFullScreenElement?!0:document.webkitFullscreenElement&&null!=document.webkitFullscreenElement?!0:!1},W=function(e,t){var a,i,o,r=this,n=function(e){r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent&&r.attachEvent(e,t)};if(-1==e.indexOf(" "))return void n(e);for(a=e.split(" "),i=0,o=a.length;o>i&&""!=a[i];i++)n(a[i])};t.SmbLight_1=function(i,o){var n,s=this,l={newTouch:!1,startX:0},d="";return s instanceof SmbLight_1?(s.$body=e("body"),s.$body.hasClass(r)||0==i.length?void 0:(s.onMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),s.fullscreenable=document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen,s.$window=e(t),s.$document=e(document),s.initialItemLoaded=!1,s.viewClosed=!1,s.items=i,s.options=e.extend(!0,{},a,o),s.$overlayWrapper=e('<div class="smbLightOverlayWrapper initializing"><div /></div>'),s.$overlayWrapper.addClass(s.options.cssClass),s.fullscreenable||s.$overlayWrapper.addClass("notFullscreenable"),s.$overlayWrapperDiv=e("> div",s.$overlayWrapper),i.length>1&&(d='<span class="navigation prev"><span /></span><span class="navigation next"><span /></span>'),d+='<span class="close"><span /></span><div class="socialButtonsWrapper"></div><span class="socialButtonsTrigger"><span /></span>',s.$mainWrapper=e('<div class="mainWrapper"><div class="itemContentWrapper"><div class="images"><p>This image is currently unavailable</p></div><div class="audioVideo" /></div>'+(s.onMobile?"":d)+"</div>").appendTo(s.$overlayWrapperDiv),s.onMobile&&(s.options.wrapperResizeDuration=0,s.$overlayWrapper.addClass("onMobile"),s.$mobileControls=e('<div class="mobileControls"><div>'+d+'<span class="fullscreenTrigger"><span /></span></div></div>').appendTo(s.$overlayWrapper)),s.$itemTitle=e('<h2 class="itemTitle" />').appendTo(s.$mainWrapper),s.$loadingOverlay=e('<div class="loadingOverlay inProgress" />').appendTo(s.$mainWrapper),s.$imagesWrapper=e("> .itemContentWrapper > .images",s.$mainWrapper),s.$audioVideo=e("> .itemContentWrapper > .audioVideo",s.$mainWrapper),s.$socialButtonsWrapper=e(".socialButtonsWrapper",s.onMobile?s.$mobileControls:s.$mainWrapper),s.$socialButtonsTrigger=e(".socialButtonsTrigger",s.onMobile?s.$mobileControls:s.$mainWrapper),s.currentItemIndex=s.options.openAt,(s.currentItemIndex<0||s.currentItemIndex>=i.length)&&(s.currentItemIndex=0),s.images={},n=s.items[s.currentItemIndex],"image"==n.type?c.call(s,n,function(){p.call(s)}):p.call(s),s.$body.addClass(r),s.$overlayWrapper.appendTo(s.$body),s.main={horizontalSpace:s.$mainWrapper.outerWidth(!0)-s.$mainWrapper.width(),verticalSpace:s.$mainWrapper.outerHeight(!0)-s.$mainWrapper.height()},f.call(s),s.$overlayWrapper.fadeTo(200,1,function(){g.call(s)}),s.$overlayWrapperDiv.on("click",function(e){s.$overlayWrapperDiv.is(e.target)&&b.call(s)}),s.$window.on("resize.smbLightEvent",function(){f.call(s)}),s.$document.on("keyup.smbLightEvent",function(e){switch(e.keyCode){case 37:w.call(s);break;case 39:$.call(s);break;case 27:b.call(s)}return!1}).on("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){var t=e(".fullscreenTrigger",s.onMobile?s.$mobileControls:s.$mainWrapper);y()?t.addClass("active"):t.removeClass("active")}),(s.onMobile?s.$mobileControls:s.$mainWrapper).on("click",".navigation",function(){var t=e(this);t.hasClass("prev")?w.call(s):$.call(s)}).on("click",".close",function(){b.call(s)}).on("click",".fullscreenTrigger",function(){var t=s.$overlayWrapper[0];e(this).hasClass("active")?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}),s.$socialButtonsTrigger.on("click",function(){""!=s.$socialButtonsWrapper.html()&&(e(this).toggleClass("show"),s.$socialButtonsWrapper.toggleClass("show"))}),s.onMobile&&(W.call(s.$overlayWrapperDiv[0],t.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(e){e.touches&&e.touches.length?e=e.touches[0]:e.changedTouches&&e.changedTouches.length&&(e=e.changedTouches[0]),l.newTouch=!0,l.startX=e.pageX}),W.call(s.$overlayWrapperDiv[0],t.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(e){var t;e.preventDefault&&e.preventDefault(),l.newTouch&&(e.touches&&e.touches.length?e=e.touches[0]:e.changedTouches&&e.changedTouches.length&&(e=e.changedTouches[0]),t=l.startX-e.pageX,Math.abs(t)<50||(l.newTouch=!1,t>0?$.call(s):w.call(s)))}),W.call(s.$overlayWrapperDiv[0],t.navigator.msPointerEnabled?"MSPointerUp":"touchend touchcancel touchleave",function(){l.newTouch=!1})),s)):new SmbLight_1(i,o)},SmbLight_1.prototype={center:function(){var e,t,a=this,i={},o=!1,r=0,n=0,s=!1,l=!1;if(a.initialItemLoaded){switch(e=a.items[a.currentItemIndex],e.type){case"image":t=a.images[e.src],t.isLoaded?(r=t.width,n=t.height):(r=400,n=400);break;case"video":r=e.width,n=e.height,s=!0;break;case"audio":r=460,n=36,l=!0}i=d.call(a,r,n,s,l),o=!0}o||(i.width=a.$mainWrapper.width(),i.height=a.$mainWrapper.height(),i.left=Math.floor((a.overlayWidth-(i.width+a.main.horizontalSpace))/2),i.top=Math.floor((a.overlayHeight-(i.height+a.main.verticalSpace))/2)),a.$mainWrapper.stop(!0).css(i)}}}(eds1_8,window);