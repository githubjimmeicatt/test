(function(c,J){function r(p,l){var d={structure:{x:[],y:[]},matrix:[]},h=c(p),t=c(l.hfStateId),r=c(l.hfStateViewSpecificId),w=c(l.tbValidateDecimalId),e=function(a){return l.i18n&&l.i18n[a]?l.i18n[a]:a},C='<table class="eds__tblCostByDateRestriction"><thead><tr><th class="edNews_theadSeparator" colspan="2"><span title="'+e("AddRow.Text")+'" id="eds__AddDateRestrictionName" class="edNews_addAction edNews_addRow">'+e("AddName.Text")+'</span><span title="'+e("AddColumn.Text")+'" id="eds__AddDateRestrictionDate" class="edNews_addAction edNews_addColumn">'+
e("AddDate.Text")+'</span></th></tr></thead><tbody></tbody></table><span style="display:none;" class="eds__validationInfo infoMessages warning"></span>',x='<td><input type="text" class="eds__table_cell_input_value" name="eds_CostRowValue" value="" placeholder="'+e("CostPlaceholder.Text")+'" /></td>',D='<tr><td colspan="2"><span title="'+e("RemoveTitle.Text")+'" class="eds__RemoveRow edNews_removeItem">'+e("RemoveTitle.Text")+'</span><input type="text" class="eds__table_cell_input_name" name="eds_CostRowName" value="" placeholder="'+
e("NamePlaceholder.Text")+'" /></td></tr>';if(0!=t.length){h.append(C);var v=c(".eds__validationInfo",h),g=c(".eds__tblCostByDateRestriction",h),m=function(a){return void 0===a||null===a||""===a?!0:!1},y=function(a){if(m(a))return!1;if(0!==w.length&&"function"==typeof Page_ClientValidate)return w.val(a),1==Page_ClientValidate("vgValidateDecimal")?!0:!1;a=a.replace(/\./g,"").replace(",",".");return!isNaN(parseFloat(a))&&isFinite(a)?!0:!1},n=function(a){m(a.message)?v.html("").hide():v.html(a.message).show()},
E=function(a){if(a!==h.attr("id"))return!1;a={success:!1,message:""};if(0==d.structure.x.length||0==d.structure.y.length)a.message=e("DefineAtLeastOneValue.Text"),n(a);d.matrix.length!=d.structure.x.length&&(a.message=e("CostKeyValuePairNotValid.Text"),n(a));for(var b=0;b<d.structure.x.length;b++)if(d.matrix[b].length!=d.structure.y.length){a.message=e("CostKeyValuePairNotValid.Text");n(a);break}for(b=0;b<d.structure.y.length;b++)if(m(d.structure.y[b].name)){a.message=e("OneOfTheNameValuesIsNotSet.Text");
n(a);break}for(b=0;b<d.structure.x.length;b++)if(m(d.structure.x[b].value)){a.message=e("OneOfTheDateValuesIsNotSet.Text");n(a);break}for(b=0;b<d.structure.x.length;b++)for(var c=0;c<d.structure.y.length;c++)if(!y(d.matrix[b][c])){a.message=e("OneOfTheCostValuesIsNotSet.Text");n(a);break}m(a.message)&&(a.success=!0);return a},F=function(a){d.structure.x.splice(a,1);d.matrix.splice(a,1)},G=function(a){d.structure.y.splice(a,1);for(var b=0;b<d.matrix.length;b++)d.matrix[b].splice(a,1)},H=function(a,
b){d.structure.y[a].name=b},z=function(a,b,c){d.matrix[a][b]=c},A=function(a){if(0<c("tbody > tr",g).length){var b=g.find("tbody > tr:first").clone();c("input",b).val("");a?c("input:first",b).val(a):c("input:first",b).val("");c("input",b).css("background-color","");c(b).appendTo(c("tbody",g))}else{b=c("thead > tr > th",g).length;var u=c(D);a?c("input:first",u).val(a):c("input:first",u).val("");if(1<b){for(var f,e=1;e<b;e++)f+=x;c(c(u).append(f)).appendTo(c("tbody",g))}else c(u).appendTo(c("tbody",
g))}d.structure.y.push({id:d.structure.y.length+1,type:"String",name:a});for(a=0;a<d.matrix.length;a++)d.matrix[a].push("")},B=function(a){var b=c("thead > tr > th",g).length+1;c("tr:first ",g).append("<th><span title='Remove' style='cursor: pointer' class='eds__RemoveCell edNews_removeItem'>Remove</span>"+('<div class="input-group date" id="eds_dtp_'+b+'_"><input type="text" readonly="readonly" class="form-control" /> <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div>')+
"</th>");m(a)||c("tr:first > th:last",g).find("input").val(a);c("#eds_dtp_"+b+"_").datetimepicker(l.dateTimePicker).on("dp.change",function(a){a=c(this).closest("th").index()-1;var b=c(this).find("input").val();d.structure.x[a].value=b;t.val(JSON.stringify(d))});c("tr:not(:first)",g).each(function(){c(this).append(x)});d.structure.x.push({id:d.structure.x.length+1,type:"DateTime",value:a});d.matrix.push(Array(d.structure.y.length))},I=function(a){var b=r.val();b&&(a=JSON.parse(b));b="<div id='eds_matrix_preview'><span title='Close preview' style='cursor: pointer' class='glyphicon glyphicon-remove-circle' id='eds_dateRestrictionPayment_preview_close'></span><table><tbody>";
for(var d=0;d<a.structure.y.length;d++){b+="<tr><td></td>";for(var f=0;f<a.structure.x.length;f++)b+="<td><span class='eds_preview_cell_title"+(a.structure.x[f].disabled?"_disabled'":"'")+">Price "+a.matrix[f][d]+" <br />Until "+a.structure.x[f].value+"</span></td>";b+="</tr>";b+="<tr><td>"+a.structure.y[d].name+"</td>";for(f=0;f<a.structure.x.length;f++)b+="<td><input type='radio' name='eds_preview_radio_cost' class='eds_preview_radio_cost"+(a.structure.x[f].disabled?"_disabled'":"'")+" id='radioButton"+
(d+f)+"'></td>";b+="</tr>"}h.append(b+"</tbody></table></div>");c(".eds_preview_radio_cost_disabled",h).attr("disabled",!0);c(".eds_preview_cell_title_disabled",h).css({opacity:.5})},k=function(a,b){switch(b){case "addRow":A("");break;case "addColumn":B("");break;case "removeRow":var e=a.closest("tr").index();a.closest("tr").remove();G(e);break;case "removeColumn":var f=a.closest("th").index();c("tbody > tr",g).each(function(){c(this).find("td:eq("+f+")").remove()});a.closest("th").remove();F(f-1);
break;case "updateName":e=a.closest("tr").index();H(e,a.val());break;case "updateValue":e=a.closest("tr").index();f=a.closest("td").index()-1;y(a.val())?(a.css("background-color",""),z(f,e,a.val())):a.css("background-color","#FEB4BE");break;case "preview":c("#eds_matrix_preview",h).remove();I(d);break;case "preview_close":c("#eds_matrix_preview",h).remove()}t.val(JSON.stringify(d));v.html("").hide()};(function(){q.validate.push([h.attr("id"),E]);var a=t.val();if(a){a=JSON.parse(a);for(var b=0;b<a.structure.x.length;b++)B(a.structure.x[b].value);
for(b=0;b<a.structure.y.length;b++)A(a.structure.y[b].name);for(b=0;b<a.structure.x.length;b++)for(var d=0;d<a.structure.y.length;d++)z(b,d,a.matrix[b][d]),c("tbody > tr:eq("+d+") > td:eq("+(b+1)+") > input",g).val(a.matrix[b][d])}})();h.on("click","#eds__AddDateRestrictionName",function(a){k(c(this),"addRow")}).on("click","#eds__AddDateRestrictionDate",function(a){k(c(this),"addColumn")}).on("click",".eds__RemoveRow",function(a){k(c(this),"removeRow")}).on("click",".eds__RemoveCell",function(a){k(c(this),
"removeColumn")}).on("propertychange change keyup paste input",".eds__table_cell_input_name",function(a){k(c(this),"updateName")}).on("propertychange change keyup paste input",".eds__table_cell_input_value",function(a){k(c(this),"updateValue")}).on("click","#eds_dateRestrictionPayment_preview",function(a){k(c(this),"preview")}).on("click","#eds_dateRestrictionPayment_preview_close",function(a){k(c(this),"preview_close")})}}var q={validate:[],dateTimePicker:{sideBySide:!1,showTodayButton:!1,showClear:!1,
allowInputToggle:!0}};r.prototype={};c.fn.eds2_2_DateRestrictionPayment_Edit_1_0_0=function(p){p=c.extend(!0,{},q,p);c.fn.eds2_2_DateRestrictionPayment_Edit_1_0_0.Validate=function(c){for(var d=0;d<q.validate.length;d++)if(q.validate[d][0]===c)return returnValidationMeta=q.validate[d][1](c),returnValidationMeta.success;return!1};return this.each(function(){c.data(this,"eds2_2_DateRestrictionPayment_Edit_1_0_0")||c.data(this,"eds2_2_DateRestrictionPayment_Edit_1_0_0",new r(this,p))})}})(eds2_2,window);