(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{JzAw:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("c2Rc"),o=i("EM62"),s=i("W1gw"),r=i("mFH5"),a=i("Y2X+"),c=i("bFHC"),l=function(){function e(e){this.snackBar=e}return e.prototype.agInit=function(e){this.id=e.value,this.tooltip=e.tooltipGetter(e.data)},e.prototype.refresh=function(e){return!0},e.prototype.copy=function(){Object(n.a)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(o.Mb(s.b))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"matTooltip","click"],[1,"id"],[1,"icon"]],template:function(e,t){1&e&&(o.Sb(0,"div",0),o.ac("click",(function(){return t.copy()})),o.Sb(1,"span",1),o.Lc(2),o.Rb(),o.Sb(3,"mat-icon",2),o.Lc(4,"file_copy"),o.Rb(),o.Rb()),2&e&&(o.kc("matTooltip",t.tooltip),o.Ab(2),o.Mc(t.id))},directives:[r.r,a.a,c.a],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),e}()},SST1:function(e,t,i){"use strict";i.r(t),i.d(t,"PermissionsComponent",(function(){return S}));var n=i("D57K"),o=i("KLQV"),s=i("sEIs"),r=i("C05f"),a=i("bwdy"),c=i("xVbo"),l=i("jIqt"),d=i("YtkY"),p=i("0Woy"),u=i("JzAw"),m=i("QjRa"),h=i("o9tz"),b=i("uuTa"),f=i("EM62"),g=i("mFH5"),y=i("Y2X+"),C=i("bFHC"),v=function(){function e(){}return e.prototype.agInit=function(e){this.params=e},e.prototype.refresh=function(e){return!0},e.prototype.deletePermission=function(){this.params.onDelete(this.params.data)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Gb({type:e,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","matTooltip","Delete",1,"like-button","highlight",3,"click"]],template:function(e,t){1&e&&(f.Sb(0,"div",0),f.Sb(1,"div",1),f.ac("click",(function(){return t.deletePermission()})),f.Sb(2,"mat-icon"),f.Lc(3,"delete"),f.Rb(),f.Rb(),f.Rb())},directives:[g.r,y.a,C.a],styles:[""],changeDetection:0}),e}(),k=i("OZ4H"),O=i("SNUn"),T=i("W1gw"),R=i("PBFl"),w=i("W6oE"),x=i("2kYt"),S=function(){function e(e,t,i,s,c){this.dialogRef=e,this.router=t,this.route=i,this.permissionsService=s,this.snackBar=c,this.permissions$=new r.a(null),this.modules=o.a,this.gridOptions=Object(n.a)(Object(n.a)({},m.a),{frameworkComponents:{idFieldComponent:u.a,permissionsActionsComponent:v},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(e){return"ID: "+e.Id+"\nGUID: "+e.Guid}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:40,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new a.a,this.targetType=parseInt(this.route.snapshot.paramMap.get("type"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key")}return e.prototype.ngOnInit=function(){this.fetchPermissions(),this.refreshOnChildClosed()},e.prototype.ngOnDestroy=function(){this.permissions$.complete(),this.subscription.unsubscribe()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.fetchPermissions=function(){var e=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe((function(t){e.permissions$.next(t)}))},e.prototype.editPermission=function(e){var t,i,o=this;if(null==e){var s=null===(t=Object.values(h.a.metadata).find((function(e){return e.type===o.targetType})))||void 0===t?void 0:t.target;i={items:[{ContentTypeName:h.a.contentTypes.permissions,For:Object(n.a)(Object(n.a)(Object(n.a)({Target:s},this.keyType===h.a.keyTypes.guid&&{Guid:this.key}),this.keyType===h.a.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===h.a.keyTypes.string&&{String:this.key})}]}}else i={items:[{EntityId:e.data.Id}]};var r=Object(b.a)(i);this.router.navigate(["edit/"+r],{relativeTo:this.route})},e.prototype.deletePermission=function(e){var t=this;confirm("Delete '"+e.Title+"' ("+e.Id+")?")&&(this.snackBar.open("Deleting..."),this.permissionsService.delete(e.Id).subscribe((function(){t.snackBar.open("Deleted",null,{duration:2e3}),t.fetchPermissions()})))},e.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.router.events.pipe(Object(c.a)((function(e){return e instanceof s.b})),Object(l.a)(!!this.route.snapshot.firstChild),Object(d.a)((function(){return!!e.route.snapshot.firstChild})),Object(p.a)(),Object(c.a)((function(e){var t=Object(n.f)(e,2);return t[0]&&!t[1]}))).subscribe((function(){e.fetchPermissions()})))},e.\u0275fac=function(t){return new(t||e)(f.Mb(k.h),f.Mb(s.c),f.Mb(s.a),f.Mb(O.a),f.Mb(T.b))},e.\u0275cmp=f.Gb({type:e,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","matTooltip","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","matTooltip","Create a new permission",1,"grid-fab",3,"click"]],template:function(e,t){1&e&&(f.Sb(0,"div",0),f.Sb(1,"div",1),f.Sb(2,"div",2),f.Sb(3,"div"),f.Lc(4,"Permissions"),f.Rb(),f.Sb(5,"button",3),f.ac("click",(function(){return t.closeDialog()})),f.Sb(6,"mat-icon"),f.Lc(7,"close"),f.Rb(),f.Rb(),f.Rb(),f.Rb(),f.Nb(8,"router-outlet"),f.Sb(9,"div",4),f.Nb(10,"ag-grid-angular",5),f.fc(11,"async"),f.Nb(12,"div",6),f.Sb(13,"button",7),f.ac("click",(function(){return t.editPermission(null)})),f.Sb(14,"mat-icon"),f.Lc(15,"add"),f.Rb(),f.Rb(),f.Rb(),f.Rb()),2&e&&(f.Ab(10),f.kc("rowData",f.gc(11,3,t.permissions$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[k.i,R.b,y.a,C.a,s.h,w.a],pipes:[x.b],styles:[""],changeDetection:0}),e}()},c2Rc:function(e,t,i){"use strict";function n(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var i=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);t.select(),document.execCommand("copy"),document.body.removeChild(t),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))}i.d(t,"a",(function(){return n}))}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.22.00/ng-edit/permissions-component.04bfbfcc3afce48e94ad.js.map